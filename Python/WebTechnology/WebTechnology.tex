\lab{Python}{Web Technologies}{Web Technologies}
\objective{Learn about HTTP, XML, and WSGI.
You will learn how to communicate using HTTP, parse XML, and use WSGI for web applications.}
\label{lab:webtech}

Since the dawn of computing, the ability to make computers talk to each other has captivated the minds of many.


The web is part of everyday life.
Ever
It is important that 

\section*{JSON}
JSON, pronounced ``Jason'', stands for \emph{JavaScript Object Notation}.
It is easy for both humans and machines to read and write the format.
Despite its name, it is a completely language independent format.
JSON is built on top of two types of datastructures: a collection of key/value pairs and an ordered list of values.
These datastructures are more familiarly called dictionaries and lists in Python.
Python's standard library has a module that can read and write JSON.
Most JSON libraries, though, have a fairly standard interface.
If performance is critical, there are Python modules for JSON that are written in C such as ujson and simplejson.

Let's begin with an example.
\begin{lstlisting}
>>> import json
>>> json.dumps(range(5))
'[0, 1, 2, 3, 4]'
>>> json.dumps({'a': 34, 'b': 483, 'c':"Hello JSON"})
'{"a": 34, "c": "Hello JSON", "b": 483}'
\end{lstlisting}
As you can see, the JSON representation of a Python list and dictionary are very similar to their respective string representations.
You can also see that each JSON message is enclosed in a pair of curly braces.
We can even nest multiple messages.
\begin{lstlisting}
>>> a = """{"car": {
    "make": "Ford",
    "model": "Focus",
    "year": 2010,
    "color": [255, 30, 30]
        }
    }"""
>>> t = json.loads(a)
>>> print t 
{u'car': {u'color': [255, 30, 30], u'make': u'Ford', u'model': u'Focus', u'year': 2010}}}
>>> print t['car']['color']
[255, 30, 30]
\end{lstlisting}

Most JSON libraries support the dump[s]/load[s] interface.
To generate a JSON message, we use \li{dump} which will accept the Python object and generate the message and write it to a file.
\li{dumps} does the same, but just returns the string rather than writing it to a file.
To perform the inverse operation, we use \li{load} or \li{loads} for reading from a file or string respectively.

Many websites and web APIs make extensive use of JSON.
Twitter, for example, return JSON messages for all queries.


\section*{TCP/IP}
The most common protocol that computers today use to communicate is TCP, Transmission Control Protocol.
It is used in everything from checking email, uploading files, and browsing web pages.
Being one of the core protocols of the internet protocol suite, it is often referred to as TCP/IP.
There are four layers to the TCP/IP protocol.
\begin{enumerate}
\item Network Interface: This is the level of networking hardware such as routers and switches.
\item Internet: This level contains a group of protocols that handle routing and movement of data on a network.
\item Transport: The critical protocols that define basic high level communication between two computers.
The two most common protocols in this layer are TCP and UDP.  TCP is by far the most widely used due to its reliability.
UDP, however, trades reliability for low latency.
\item Application: Software that utilize the transport protocols to move information between computers.
This layer includes protocols important for email, file transfers, and browsing the web.
\end{enumerate}

TCP/IP has its origins in the mid 1970s.
The TCP protocol dictates how computers connect to each, exchange bits of information called packets, and then close the connection.
TCP/IP is very reliable, ordered, and error-checked.

Python has support for communicating via TCP in the standard library.
A short demonstration will aide our discussion.
\lstinputlisting[style=FromFile]{tcp_server.py}
\lstinputlisting[style=FromFile]{tcp_client.py}


\section*{HTTP}
HTTP stands for Hypertext Transfer Protocol.
The protocol is centered around a request and response paradigm.
A client makes a request to a server and the server replies with response.
HTTP is an application layer networking protocol.
It usually relies on the underlying TCP protocol to provide networking capabilities.
There are several methods defined for HTTP, but the two most common are GET and POST.
GET is designed to request information from a server.
POST is designed to request that a server accept additional data.

Let's look at a GET request.
\begin{lstlisting}[language=HTML]
GET / HTTP/1.1
Host: acme.byu.edu
\end{lstlisting}

\section*{Web Applications with WSGI}
